# RELAP5-POST
## 简介
本项目是为RELAP5的后处理而构建，主要用于从Rstplt文件中提取数据并绘图。

## 适用范围
系统要求：适用于Mac OS和Linux，Windows上需要做少量修改

版本要求：RELAP5/MOD3.3-MOD3.5 （MOD3.2推定可使用）

测试情况：已经在Intel/Apple CPU 的Mac上测试，部分测试在Intel CPU的Windows上完成

## 运行
下载项目文件后，在终端运行RELAP5-POST.py即可

## 文件说明
1. RELAP5-POST.py为主程序
2. RELAP5-POST.ui为[QT designer](https://build-system.fman.io/qt-designer-download)生成的界面化布局文件，可使用'pyuic5'工具将.ui文件转换为.py文件
3. read_rstplt 为最新读取所有绘图变量程序
4. read_rstplt_legacy 为旧的读取所有绘图变量程序
5. monitor 为读取指定绘图变量程序，功能类似RELAP5 内置strip功能

## 使用
### 主程序RELAP5-POST介绍
1. 运行程序
2. 程序界面最上方分别为Rstplt文件、提取数据程序（包括read_rstplt和monitor）、输出文件路径，每一栏后方三点为浏览选择按钮
3. 程序界面次上访分别为自变量选择（x1为字母部分，x2为数字部分），自变量和因变量标签和单位、因变量选择（y1为字母部分，y2为数字部分）
4. 程序界面中间左方为绘图设置，包括DPI，横纵轴限值，网格显示，线宽、线型、颜色（暂时没有用处）、字体大小
5. 程序界面中间右方为相关功能按钮，功能包括增加、删除鼠标选定的因变量，也可以通过Input Y手动输入需要因变量（格式类似`time_0,p_101010000,velf_102010000`），注意下划线连接字母和数字部分，逗号连接多个变量。功能还有清除所有自变量和因变量。
6. 程序界面次下方左边展示选定的自变量和因变量，右边为手动输入因变量区域
7. 程序界面次下方中间为相关功能按钮。

    **R2CSV** 功能包括从Rstplt文件中读取到CSV，其中CSV文件会以对话框形式供选择，Rstplt文件路径由上方路径框选择。

    **Monitor** 功能与R2CSV功能类似，但需要通过`Add Y` 或`Input Y`指定提取的变量。

    **Export Data** 功能从R2CSV中读取的数据中导出选定的数据，选定的数据同样通过`Add Y` 或`Input Y`指定。

    **comparison plot** 功能将比较绘制多个结构类似的CSV，要求CSV文件至少包含两列相同列（其中一列为`time_0`）。

    **comparison plot** 功能将利用dtw指标衡量多个结构类似的CSV的差异，要求CSV文件至少包含两列相同列（其中一列为`time_0`）。

8. 程序界面次下方右部为相关功能按钮。功能包括绘制图像、批量绘制多个变量并存储到文件夹、绘制CSV里所有变量并存储到文件夹、加载CSV数据（包括变量类型、时间起始、DPI等默认设置）
9. 程序界面下方为操作记录框，方便调试和观察。

### 初次使用
1. 推荐依次选取Rstplt文件路径、read_rstplt文件路径
2. 然后点击`R2CSV`提取所有绘图变量数据，等待约1分钟（13G的Rstplt文件，具体速度取决于机器性能和系统）
3. 点击Load Data 加载数据，可以观察到相关框加载了CSV文件数据和默认配置
4. 点击y1和y2，点击`Add Y` 添加因变量，可以在变量框和调试信息框观察到选取的变量。点击`Delete Y`删除选中的因变量。点击`Clear All`清空，方便快速重新选择。随后点击`PLOT`绘制变量
5. 点击`Export Data` 导出选择的变量至相应CSV中，可以利用其他软件查看处理

### 注意事项
1. **由于通常提取的CSV文件都相当大，慎用`PLOT CSV`功能，尽管已经内置了检查列大小**

2. **由于通常提取的CSV文件都相当大，提取通常需要耗时几秒到一分钟，由于单线程缘故会有界面卡住无法操作，无需担心，仅需要在终端中查看提取状态即可判断是否还在工作**

3. 由于暂时没有设置自动拉伸适应，在不同尺寸、不同分辨率的屏幕上暂时会有显示比较奇怪的地方，请有能力者自行修改.ui文件

4. 由于作者能力、精力有限，部分功能未能得到充分测试，不可避免存在bug，请及时反馈或自行修改。

## 待办事项
1. 自适应拉伸
2. 程序文档

## 联系
请从issue界面讨论联系




